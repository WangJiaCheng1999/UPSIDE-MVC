
@{
    ViewData["Title"] = "DataPage";
}
<div class="barchart">
    <svg id="barchart1"></svg>
</div>

<div class="timeUseSummary"></div>
<div class="correctRateSummary"></div>



<script>
    //Maps that save each round's different types of experiment data

    let aveTimeUse = new Map();
    let eachTimeUse = new Map();

    let aveAccuracy = new Map();
    let eachAccuracy = new Map();

    let allData = getAllData(3);

    for(let i = 0; i < allData.size; i++){
        console.log(i);
    }

    //Calculate the average time spent for each experiment and add the result into the aveTimeUse map
    for (let m of eachTimeUse) {
        aveTimeUse.set(m[0], aveCal(m[1]));
    }
    // console.log(aveTimeUse);
    // console.log("Fastest round is :" + findBiggestValue(aveTimeUse));


    var data = Array.from(aveTimeUse.values());

    //Set Graph's hight and width
    var svgWidth = 500;
    var svgHeight = 500;
    var svgX = 0;
    var svgY = 0;

    //The width of each bar and gap between them
    var barGap = 40;
    var barwidth = 10;


    //Set the scale of the Barchart's number
    var scale = d3.scaleLinear([0, d3.max(data)], [0, svgWidth * 0.9]);

    //Select the svg that will hold the barchart by id
    var barchartSvg = d3.select(".barchart")
        .select("#barchart1")
        .attr("width", svgWidth)
        .attr("height", svgHeight)
        .attr("transform", "translate(" + svgX + "," + svgY + ")");


    //Adding bars to the barchart
    var barchart = barchartSvg.selectAll("rect")
        .data(data)
        .enter()
        .append("rect")
        .attr("width", function (d, i) {
            return barwidth;
        })
        .attr("height", function (d, i) {
            return scale(d);
        })
        .attr("transform", function (d, i) {
            var h = svgHeight - scale(d) - 20;
            return "translate(" + barGap * i + "," + h + ")";
        });

    //Set X Axis
    let scaleX = d3.scaleLinear([1, data.length], [0, 400]);
    let xAxis = d3.axisBottom()
        .scale(scaleX)
        .ticks(data.length, "s");

    //Append to barchart
    barchartSvg.append("g")
        .attr("transform", "translate(0,482)")
        .call(xAxis);

    //Axis Font
    d3.selectAll("g.tick").select("line").style("color", "red");
</script>

@*PieChart(YiFei)*@
<script>
    //JSONData contains each Round's JSON Data
    var jsonData = getAllData(3);
    console.log(jsonData);
</script>







